<div class="message-container">
    <h1>Messages and Notifications</h1>

    <div class="message-grid">
        <div class="msg-card inbox">
            <div class="msg-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="22 12 16 12 14 15 10 15 8 12 2 12"></polyline>
                    <path
                        d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z">
                    </path>
                </svg>
            </div>
            <div class="msg-lable">Inbox</div>
            <div class="inbox-value">0</div>
        </div>
        <div class="msg-card unread">
            <div class="msg-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                    <polyline points="22,6 12,13 2,6"></polyline>
                </svg>
            </div>
            <div class="msg-lable">Unread</div>
            <div class="inbox-value">0</div>
        </div>
        <div class="msg-card sent">
            <div class="msg-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="22" y1="2" x2="11" y2="13"></line>
                    <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                </svg>
            </div>
            <div class="msg-lable">Sent</div>
            <div class="inbox-value">0</div>
        </div>
    </div>

    <div class="messages-section">
        <div class="msg-header">
            <div class="msg-tabs">
                <button class="tab-btn" [class.active]="currentTab === 'inbox'" (click)="switchTab('inbox')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                        <polyline points="22,6 12,13 2,6"></polyline>
                    </svg>
                    Inbox
                </button>
                <button class="tab-btn" [class.active]="currentTab === 'sent'" (click)="switchTab('sent')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="22" y1="2" x2="11" y2="13"></line>
                        <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                    </svg>
                    Sent
                </button>
            </div>
            <button class="compose-btn" (click)="composeMessage()">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
                Compose Message
            </button>
        </div>

        <div class="messages-list">
            <!-- Empty State -->
            <div class="empty-state" *ngIf="messages.length === 0">
                <div class="empty-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                        <polyline points="22,6 12,13 2,6"></polyline>
                    </svg>
                </div>
                <p>No messages</p>
            </div>
        </div>
    </div>

    <!-- Compose Modal -->
    <div class="modal-overlay" *ngIf="isComposeOpen" (click)="closeCompose()">
        <div class="compose-modal" (click)="$event.stopPropagation()">
            <div class="modal-header">
                <h2>Compose Message</h2>
                <button class="close-btn" (click)="closeCompose()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <p class="modal-subtitle">Send a message to another user</p>

                <div class="form-group">
                    <label>Recipient</label>
                    <div class="autocomplete-wrapper">
                        <input type="text" [(ngModel)]="searchTerm" (input)="filterUsers()"
                            (focus)="showSuggestions = true" (blur)="hideSuggestions()"
                            placeholder="Type username (e.g. admin)">

                        <div class="suggestions-list" *ngIf="showSuggestions && filteredUsers.length > 0">
                            <div class="suggestion-item" *ngFor="let user of filteredUsers" (click)="selectUser(user)">
                                <div class="user-avatar">{{ user.name.charAt(0) }}</div>
                                <div class="user-info">
                                    <span class="user-name">{{ user.name }}</span>
                                    <span class="user-username">@{{ user.username }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Subject</label>
                    <input type="text" placeholder="Enter subject">
                </div>

                <div class="form-group">
                    <label>Message</label>
                    <textarea placeholder="Enter your message" rows="5"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="cancel-btn" (click)="closeCompose()">Cancel</button>
                <button class="send-btn" (click)="sendMessage()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="22" y1="2" x2="11" y2="13"></line>
                        <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                    </svg>
                    Send
                </button>
            </div>
        </div>
    </div>
</div>