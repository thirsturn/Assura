<div class="usermng">
    <h1>User Management</h1>
    <p class="subtitle">Manage all users</p>

    <div class="user-grid">
        <div class="filters">
            <label for="userSearch" class="search-box">
                <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="7"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
                <input id="userSearch" type="search" placeholder="Search by name or email" />
            </label>
        </div>

        <div class="table-wrap">
            <table class="user-table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Role</th>
                        <th>Department</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="userTableBody">
                    <tr *ngFor="let user of users">
                        <td>
                            <div class="user-info">
                                <div class="user-avatar">{{ user.firstName.charAt(0) }}</div>
                                <div>
                                    <div class="user-name">{{ user.firstName }}</div>
                                    <div class="user-email">@{{ user.username }}</div>
                                </div>
                            </div>
                        </td>
                        <td>{{ user.roleName }}</td>
                        <td>{{ user.divisionName || 'N/A' }}</td>
                        <td>
                            <span class="status-badge" [class.active]="user.isOnline" [class.offline]="!user.isOnline">
                                {{ user.isOnline ? 'Online' : 'Offline' }}
                            </span>
                        </td>
                        <td>
                            <button class="action-btn edit" title="Edit" (click)="openEditModal(user)">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                </svg>
                            </button>
                            <button class="action-btn delete" title="Delete">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="3 6 5 6 21 6"></polyline>
                                    <path
                                        d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2">
                                    </path>
                                </svg>
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Edit User Modal -->
<div class="modal-overlay" *ngIf="isEditModalOpen">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Edit User</h2>
            <button class="close-btn" (click)="closeEditModal()">Ã—</button>
        </div>
        <div class="modal-body">
            <form (ngSubmit)="saveUser()">
                <div class="form-group">
                    <label>First Name</label>
                    <input type="text" [(ngModel)]="selectedUser.firstName" name="firstName" required>
                </div>
                <div class="form-group">
                    <label>Last Name</label>
                    <input type="text" [(ngModel)]="selectedUser.lastName" name="lastName" required>
                </div>
                <div class="form-group">
                    <label>Role ID</label>
                    <input type="number" [(ngModel)]="selectedUser.roleID" name="roleID" required>
                </div>
                <div class="form-group">
                    <label>Division ID</label>
                    <input type="number" [(ngModel)]="selectedUser.divisionID" name="divisionID" required>
                </div>
                <div class="form-group checkbox-group">
                    <label>
                        <input type="checkbox" [(ngModel)]="selectedUser.isBlocked" name="isBlocked">
                        Blocked
                    </label>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-cancel" (click)="closeEditModal()">Cancel</button>
                    <button type="submit" class="btn-save">Save Changes</button>
                </div>
            </form>
        </div>
    </div>
</div>